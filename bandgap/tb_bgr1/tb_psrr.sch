v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
L 4 40 -550 40 -280 {}
L 4 40 -550 420 -550 {}
L 4 420 -550 420 -280 {}
L 4 40 -280 420 -280 {}
T {IBIAS = 2.894uA @ 27 deg} 30 -350 0 0 0.4 0.4 {}
T {Î”VBE = 36.273 mV
IR = 17.33 uA @ 27 deg} 480 -70 0 0 0.4 0.4 {}
N 860 -830 1050 -830 {lab=VDD}
N 470 -770 470 -710 {lab=VDM3}
N 670 -770 670 -710 {lab=VDM2}
N 840 -770 840 -710 {lab=#net1}
N 1030 -770 1030 -710 {lab=#net2}
N 360 -680 360 -640 {lab=#net3}
N 510 -680 510 -640 {lab=#net3}
N 630 -680 630 -640 {lab=#net3}
N 990 -680 990 -640 {lab=#net3}
N 800 -680 800 -640 {lab=#net3}
N 570 -800 630 -800 {lab=VDM18}
N 470 -630 470 -590 {lab=VDM18}
N 670 -620 670 -590 {lab=VDM17}
N 570 -560 630 -560 {lab=VDM17}
N 570 -620 570 -560 {lab=VDM17}
N 570 -620 670 -620 {lab=VDM17}
N 570 -750 570 -630 {lab=VDM18}
N 470 -630 570 -630 {lab=VDM18}
N 800 -750 990 -750 {lab=VDM18}
N 990 -800 990 -750 {lab=VDM18}
N 800 -800 800 -750 {lab=VDM18}
N 320 -830 320 -680 {lab=VDD}
N 450 -830 690 -830 {lab=VDD}
N 470 -400 470 -390 {lab=#net4}
N 840 -260 840 -240 {lab=#net5}
N 590 -210 630 -210 {lab=VSS}
N 590 -210 590 -180 {lab=VSS}
N 510 -210 550 -210 {lab=VSS}
N 550 -210 550 -180 {lab=VSS}
N 970 -180 1030 -180 {lab=VSS}
N 470 -400 970 -400 {lab=#net4}
N 970 -270 970 -180 {lab=VSS}
N 1030 -300 1030 -240 {lab=#net6}
N 1010 -370 1030 -370 {lab=#net6}
N 320 -640 320 -590 {lab=#net3}
N 800 -640 990 -640 {lab=#net3}
N 280 -830 320 -830 {lab=VDD}
N 290 -90 330 -90 {lab=VSS}
N 840 -520 860 -520 {lab=OUT}
N 770 -210 800 -210 {lab=VSS}
N 770 -210 770 -180 {lab=VSS}
N 450 -680 470 -680 {lab=VDD}
N 450 -800 450 -680 {lab=VDD}
N 450 -800 470 -800 {lab=VDD}
N 670 -680 690 -680 {lab=VDD}
N 690 -800 690 -680 {lab=VDD}
N 670 -800 690 -800 {lab=VDD}
N 840 -800 860 -800 {lab=VDD}
N 840 -680 860 -680 {lab=VDD}
N 860 -800 860 -680 {lab=VDD}
N 1030 -680 1050 -680 {lab=VDD}
N 1050 -800 1050 -680 {lab=VDD}
N 1030 -800 1050 -800 {lab=VDD}
N 570 -440 630 -440 {lab=VSM6}
N 670 -510 670 -470 {lab=VSM10}
N 470 -530 470 -470 {lab=VSM6}
N 570 -510 570 -440 {lab=VSM6}
N 320 -520 320 -500 {lab=#net7}
N 360 -520 360 -470 {lab=#net7}
N 320 -520 360 -520 {lab=#net7}
N 320 -530 320 -520 {lab=#net7}
N 510 -560 570 -560 {lab=VDM17}
N 670 -650 670 -620 {lab=VDM17}
N 510 -800 570 -800 {lab=VDM18}
N 470 -650 470 -630 {lab=VDM18}
N 570 -800 570 -750 {lab=VDM18}
N 570 -750 800 -750 {lab=VDM18}
N 470 -410 470 -400 {lab=#net4}
N 770 -180 970 -180 {lab=VSS}
N 1030 -650 1030 -370 {lab=#net6}
N 320 -650 320 -640 {lab=#net3}
N 630 -640 800 -640 {lab=#net3}
N 510 -640 630 -640 {lab=#net3}
N 320 -640 360 -640 {lab=#net3}
N 360 -640 510 -640 {lab=#net3}
N 840 -650 840 -520 {lab=OUT}
N 320 -830 450 -830 {lab=VDD}
N 450 -830 450 -800 {lab=VDD}
N 690 -830 690 -800 {lab=VDD}
N 860 -830 860 -800 {lab=VDD}
N 1050 -830 1050 -800 {lab=VDD}
N 510 -440 570 -440 {lab=VSM6}
N 670 -530 670 -510 {lab=VSM10}
N 690 -830 860 -830 {lab=VDD}
N 470 -330 470 -320 {lab=#net4}
N 670 -410 670 -340 {lab=VSM8}
N 840 -330 840 -260 {lab=#net5}
N 970 -340 970 -270 {lab=VSS}
N 1030 -370 1030 -300 {lab=#net6}
N 320 -440 320 -400 {lab=VSS}
N 470 -320 470 -310 {lab=#net4}
N 470 -250 470 -240 {lab=#net8}
N 670 -340 670 -310 {lab=VSM8}
N 670 -250 670 -240 {lab=VSM8}
N 330 -90 670 -90 {lab=VSS}
N 670 -180 770 -180 {lab=VSS}
N 470 -180 470 -150 {lab=VSS}
N 550 -180 550 -90 {lab=VSS}
N 590 -180 590 -90 {lab=VSS}
N 670 -180 670 -150 {lab=VSS}
N 320 -330 320 -310 {lab=VSS}
N 320 -400 320 -390 {lab=VSS}
N 470 -510 570 -510 {lab=VSM6}
N 470 -150 470 -90 {lab=VSS}
N 670 -150 670 -90 {lab=VSS}
N 670 -260 670 -250 {lab=VSM8}
N 670 -310 670 -260 {lab=VSM8}
N 840 -440 840 -390 {lab=OUT}
N 840 -520 840 -500 {lab=OUT}
N 320 -390 320 -330 {lab=VSS}
N 840 -500 840 -440 {lab=OUT}
N 470 -390 470 -330 {lab=#net4}
N 1450 -620 1450 -610 {lab=GND}
C {iopin.sym} 280 -830 0 1 {name=p1 lab=VDD}
C {iopin.sym} 290 -90 0 1 {name=p2 lab=VSS}
C {opin.sym} 860 -520 0 0 {name=p3 lab=OUT}
C {res.sym} 470 -280 0 0 {name=R1
value=708.1k
footprint=1206
device=resistor
m=1}
C {res.sym} 840 -360 0 0 {name=R2
value=980.7k
footprint=1206
device=resistor
m=1}
C {res.sym} 1030 -210 0 0 {name=R3
value=98k
footprint=1206
device=resistor
m=1}
C {sky130_fd_pr/pnp_05v5.sym} 650 -210 0 0 {name=Q4
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 490 -210 0 1 {name=Q1
model=pnp_05v5_W3p40L3p40
m=64
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 820 -210 0 0 {name=Q2
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {lab_pin.sym} 470 -740 0 1 {name=p6 sig_type=std_logic lab=VDM3}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 1010 -800 0 0 {name=M14
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 820 -800 0 0 {name=M1
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 650 -800 0 0 {name=M2
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 490 -800 0 1 {name=M3
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 1010 -680 0 0 {name=M4
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 820 -680 0 0 {name=M16
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 650 -680 0 0 {name=M17
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 490 -680 0 1 {name=M18
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} 340 -680 0 1 {name=M5
W=7.5
L=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 650 -560 0 0 {name=M10
W=2.5
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 490 -560 0 1 {name=M6
W=2.5
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 990 -370 0 1 {name=M7
W=15
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 650 -440 0 0 {name=M8
W=2.5
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 490 -440 0 1 {name=M9
W=2.5
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {res.sym} 320 -560 0 0 {name=R4
value=200k
footprint=1206
device=resistor
m=1}
C {sky130_fd_pr/nfet3_01v8_lvt.sym} 340 -470 0 1 {name=M11
W=2.5
L=2
nf=1
mult=1
body=VSS
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {lab_pin.sym} 320 -310 0 0 {name=p10 sig_type=std_logic lab=VSS}
C {lab_pin.sym} 470 -610 0 1 {name=p4 sig_type=std_logic lab=VDM18}
C {lab_pin.sym} 470 -520 0 1 {name=p5 sig_type=std_logic lab=VSM6}
C {lab_pin.sym} 670 -730 0 0 {name=p11 sig_type=std_logic lab=VDM2}
C {lab_pin.sym} 670 -610 0 0 {name=p12 sig_type=std_logic lab=VDM17}
C {lab_pin.sym} 670 -510 0 0 {name=p13 sig_type=std_logic lab=VSM10}
C {lab_pin.sym} 670 -360 0 0 {name=p14 sig_type=std_logic lab=VSM8}
C {vsource.sym} 1230 -650 0 0 {name=V3 value="DC 1.8 AC 1" savecurrent=false}
C {vsource.sym} 1450 -650 0 0 {name=V4 value="DC 0" savecurrent=false}
C {lab_pin.sym} 1230 -620 0 0 {name=p15 sig_type=std_logic lab=VSS}
C {lab_pin.sym} 1450 -680 0 0 {name=p16 sig_type=std_logic lab=VSS}
C {gnd.sym} 1450 -610 0 0 {name=l2 lab=GND}
C {lab_pin.sym} 1230 -680 0 0 {name=p17 sig_type=std_logic lab=VDD}
C {sky130_fd_pr/corner.sym} 1180 -500 0 0 {name=CORNER1 only_toplevel=true corner=tt}
C {code_shown.sym} 1330 -530 0 0 {name=s2 only_toplevel=false value="

.control
 ac dec 200 1 1e9
 plot OUT2
 plot VBE2 - VBE1
 plot VBE2 VBE1
 plot i(Vmeas)
 plot 20*log10((v(vdd)/v(out)))

 measure ac PSRR_10Hz  param=20*log10(mag(v(vdd)/v(out))) at=10
 measure ac PSRR_1k    param=20*log10(mag(v(vdd)/v(out))) at=1k
 measure ac PSRR_1Meg  param=20*log10(mag(v(vdd)/v(out))) at=1e6

.endc
"}
